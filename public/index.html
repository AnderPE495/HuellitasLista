<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel de Control Huellitas</title>
<style>
  body { font-family: Arial, sans-serif; margin: 40px; }
  .container { margin-top: 20px; }
  table { width: 100%; border-collapse: collapse; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { background-color: #f2f2f2; } p#total-caja {font-size: 40px; margin:0px; font-weight:700}
</style>
</head>
<body>
  <header>
    <h1>Panel de Control Huellitas</h1>
  </header>
  <h2>Añadir Alumno</h2>
  <form id="form-venta">
    <input type="text" id="Nombre" placeholder="Nombre" required />
    <input type="number" id="dni" placeholder="dni" required />
        <input type="text" id="descripcion" placeholder="Descripción" required />
    <button type="submit">Añadir Alumno</button>
  </form>

  </div>
  <div class="container">
     <h2>Lista</h2>
    <table id="ventas-table">
      <tr>
        <th>Nombre</th>
        <th>DNI</th>
        <th>Descripción</th>
      </tr>
      <!-- Los alumnos se cargarán aquí -->
    </table>
    
<script>
// Función para cargar y mostrar los datos en la tabla
async function cargarDatos() {

  // Cargar ventas
  const alumnos = await fetch('/alumnos').then(res => res.json());
  const ventasTable = document.getElementById('ventas-table');
  alumnos.forEach(alumnos => {
    ventasTable.innerHTML += `<tr><td>${alumnos.nombre}</td><td>${alumnos.dni}</td><td>${alumnos.descripcion}</td></tr>`;
  });

}

// Función para añadir una venta
document.getElementById('form-venta').onsubmit = async function(event) {
  event.preventDefault();
  const nombre = document.getElementById('nombre').value;
  const dni = parseFloat(document.getElementById('dni').value);
  const descripcion = document.getElementById('descripcion').value;
  const respuesta = await fetch('/alumnos', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ producto, precio, fecha })
  });
  if (respuesta.ok) {
    window.location.reload(); // Recargar la página para actualizar la lista
  }
};

// Llamar a cargarDatos cuando la ventana se cargue
window.onload = cargarDatos;
</script>
</body>
</html>
